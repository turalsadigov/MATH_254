<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.189">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Tural Sadigov">
<meta name="author" content="Felix Pu">
<meta name="author" content="Andrew Gou">
<meta name="dcterms.date" content="2022-11-16">

<title>State-level crime occurrance in the US in relation to household firmarm ownership: a depth study with respect to 2019 data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>


<script src="MATH-254-Project-Final submission _files/libs/clipboard/clipboard.min.js"></script>
<script src="MATH-254-Project-Final submission _files/libs/quarto-html/quarto.js"></script>
<script src="MATH-254-Project-Final submission _files/libs/quarto-html/popper.min.js"></script>
<script src="MATH-254-Project-Final submission _files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="MATH-254-Project-Final submission _files/libs/quarto-html/anchor.min.js"></script>
<link href="MATH-254-Project-Final submission _files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="MATH-254-Project-Final submission _files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="MATH-254-Project-Final submission _files/libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="MATH-254-Project-Final submission _files/libs/bootstrap/bootstrap.min.js"></script>
<link href="MATH-254-Project-Final submission _files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="MATH-254-Project-Final submission _files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="MATH-254-Project-Final submission _files/libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<style>
    .quarto-title-block .quarto-title-banner {
      background: darkblue;
    }
    </style>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body>

<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">State-level crime occurrance in the US in relation to household firmarm ownership: a depth study with respect to 2019 data</h1>
                      </div>
  </div>
    
  <div class="quarto-title-meta-author">
    <div class="quarto-title-meta-heading">Authors</div>
    <div class="quarto-title-meta-heading">Affiliations</div>
    
      <div class="quarto-title-meta-contents">
      Tural Sadigov 
    </div>
      <div class="quarto-title-meta-contents">
          <p class="affiliation">
              Hamilton College
            </p>
        </div>
        <div class="quarto-title-meta-contents">
      Felix Pu 
    </div>
      <div class="quarto-title-meta-contents">
          <p class="affiliation">
              Hamilton College
            </p>
        </div>
        <div class="quarto-title-meta-contents">
      Andrew Gou 
    </div>
      <div class="quarto-title-meta-contents">
          <p class="affiliation">
              Hamilton College
            </p>
        </div>
      </div>

  <div class="quarto-title-meta">

        
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">November 16, 2022</p>
      </div>
    </div>
      
    </div>
    
  <div>
    <div class="abstract">
      <div class="abstract-title">Abstract</div>
      According to CDC’s annual statistics, on average, 321 people are shot dead as victims of criminal activies in the US everyday. Yet, federal gun-control program has always faced resistence with disagreements over association between firearms and crime occurrence. In this paper, firearm data from FBI National Instant Criminal BackgroundCheck System and the state-level crime data from FBI Unified Crime Reporting Program in 2019 are used to test existence of potential association between gun possession and occurrence of crimes across the US. Three single linear regression models using the number of permits as explanatory variable and one multivariate regression model with a nuanced total gun explanatory variable are generated. The result suggests that there is a considerable positive correlation between the number of permits and the number of crimes. Moreover, the number of guns is also correlated with the total crime with a strong association, indicating that firearm ownership plays a crucial role in victimization.
    </div>
  </div>
  
  </header><div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#background-and-significance" id="toc-background-and-significance" class="nav-link active" data-scroll-target="#background-and-significance"><span class="toc-section-number">1</span>  Background and Significance</a></li>
  <li><a href="#methods" id="toc-methods" class="nav-link" data-scroll-target="#methods"><span class="toc-section-number">2</span>  Methods</a></li>
  <li><a href="#results" id="toc-results" class="nav-link" data-scroll-target="#results"><span class="toc-section-number">3</span>  Results</a></li>
  <li><a href="#discussionconclusions" id="toc-discussionconclusions" class="nav-link" data-scroll-target="#discussionconclusions"><span class="toc-section-number">4</span>  Discussion/Conclusions</a></li>
  <li><a href="#appendix" id="toc-appendix" class="nav-link" data-scroll-target="#appendix"><span class="toc-section-number">5</span>  Appendix</a></li>
  <li><a href="#bibliography" id="toc-bibliography" class="nav-link" data-scroll-target="#bibliography"><span class="toc-section-number">6</span>  <strong>Bibliography</strong></a></li>
  </ul>
</nav>
</div>
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="background-and-significance" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Background and Significance</h1>
<p>Gun control has always been a controversial topic in the United States. On one hand, “American gun owners - an estimated 80 million of them - see their firearms as protection to defend their own freedoms and property” <span class="citation" data-cites="shooting2022">(<a href="#ref-shooting2022" role="doc-biblioref">Smith 2022</a>)</span> under the Second Amendment, which notes “the right of the people to keep and bear Arms, shall not be infringed” <span class="citation" data-cites="seconda2002">(<a href="#ref-seconda2002" role="doc-biblioref"><span>“Second Amendment”</span> 2002</a>)</span>. On the other hand, tragedies such as the 2018 Stoneman Douglas High School Shooting, where 17 young adults were murdered under “a pattern of disciplinary issues and unnerving behavior,” <span class="citation" data-cites="shooter2018">(<a href="#ref-shooter2018" role="doc-biblioref">Rozsa, Berman, and Merle 2018</a>)</span> led other Americans to strongly advocate restrictive gun control policies.Tragedies related to firearms reignited the debate over gun control in the US. But realistically, many believe that “the argument over guns has simply become too politically divisive and culturally entrenched to allow for meaningful change” <span class="citation" data-cites="shooting2022">(<a href="#ref-shooting2022" role="doc-biblioref">Smith 2022</a>)</span>. Even the the new gun laws New Jersey recently enacted in response to the Supreme Court’s ruling are facing ongoing litigation and legal scrutiny <span class="citation" data-cites="gunlaw2022">(<a href="#ref-gunlaw2022" role="doc-biblioref">Han 2022</a>)</span>. The tremendous resistance against gun rights sets the motivation behind composing this paper, specifically whether their resistance towards guns based on the reason that guns are associated with crimes can be backed by statistical analysis. Would more firearms lead to more crimes as anti-gun individuals contend for or is it unrelated that occurrences of crimes is independent from presence of firearms. With this question, this paper uses data collected by federal agencies at 2019 to investigate the potential association between gun possession and occurrences of crime across United States. This paper is written to answer to what degree is prevalence of gun possession associated with occurrence of crime: a focus study on United States based on 2019 data.</p>
<p>There are prior researches conducted pertaining to this topic and other relevant topics of this field. For example, Gary Kleck and E. Britt Patterson <span class="citation" data-cites="Kleck1993">(<a href="#ref-Kleck1993" role="doc-biblioref">Kleck and Patterson 1993</a>)</span> conclude in a prior study that the results are generally negative for the violence control effectiveness of gun control. Yet, the significance of the few supportive results should not be overlooked. There do appear to be some gun controls which work. In addition, Philip J. Cook <span class="citation" data-cites="Cook1981">(<a href="#ref-Cook1981" role="doc-biblioref">Cook 1981</a>)</span> studies the effect of Gun availability on violent crime patterns. And Cook’s research concludes that it is reasonable to suppose that moderate gun control measures have the potential to discourage some violent criminals - potential or active - from obtaining guns. Miller <span class="citation" data-cites="miller2007">(<a href="#ref-miller2007" role="doc-biblioref">Miller, Hemenway, and Azrael 2007</a>)</span>examines the role played by household firearms in homicide victimization, whom concludes existence of potential positive association between percentage of household firearm ownership and crime rates across the United States based on data collected in the early 2000s.</p>
<p>However, this research is significant for three reasons. Firstly, most of the prior researches are done based on historical data when the partisan divide on gun rights and regulations was not as significant, such as a study conducted by Branas<span class="citation" data-cites="branas2009">(<a href="#ref-branas2009" role="doc-biblioref">Branas et al. 2009</a>)</span>. Therefore, one of the goals of this paper is to update this field with analysis based on recent data. Secondly, prior researches did not emphasize the specifics of guns owned in terms of their type and actual number but substituted by a vague percentage of household firearm ownership. Thirdly, different from prior studies, this research uses number of permits as the initial explanatory variable instead of number of firearms presented at each state. Permit is intentionally chosen because this research intends to extend the magnitude of the explanatory variable by including all the individuals with the potential of owning firearms, thereby holistically examining whether there is an association between a broadly defined magnitude of ‘gun possession’ (numbers of permit) and occurrence of crimes across the United States in 2019, in which the null hypothesis and the alternative hypothesis are given as the following. There are four tests conducted in this paper, thereby the significance level is set at 0.0125 as calculated by 0.05/4 to avoid p-hacking practice.</p>
<p><strong>Hypotheses:</strong></p>
<p>Null Hypothesis: There is no association between gun possession and occurrence of crime across the southern states in 2019</p>
<p>Alternative Hypothesis: There is association between gun possession and occurrence of crime across the southern states in 2019</p>
<p>Significance Level/Alpha: 0.0125</p>
</section>
<section id="methods" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Methods</h1>
<p><strong>Raw Data Description:</strong></p>
<p>The “Firearm checks” data <span class="citation" data-cites="firearm_check2019">(<a href="#ref-firearm_check2019" role="doc-biblioref">Singer-Vine 2019</a>)</span> is recorded by the FBI’s National Instant Criminal Background Check System from November 1998 – September 2022. Data is collected by all the registered sales and license administrations. Before every permit grant and sale, personnel would call the FBI or other designated agencies to ensure that customer does not have a criminal record. Otherwise, customers are ineligible to obtain the permit nor make a purchase. And when purchasing firearms, the type of gun purchased will be recorded as well.</p>
<p>The “state crime” data from 1960 to 2019 <span class="citation" data-cites="state_crime2019">(<a href="#ref-state_crime2019" role="doc-biblioref">C.Bart et al. 2022</a>)</span> is collected by the FBI’s Unified Crime Reporting Program (UCR) using its Summary Reporting System along with the assistance from the U.S. Department of Justice and the Federal Bureau of Investigation. The data contains two main categories: property and violent crime. Property crime refers to burglary, larceny, and motor related crime while violent crime refers to assault, murder, rape, and robbery.</p>
<p><strong>Methods:</strong></p>
<p>The analytic method used in research is regression analysis, both simple linear regression and multivariate linear regression, under R Studio <span class="citation" data-cites="Rstudio">(<a href="#ref-Rstudio" role="doc-biblioref">R Core Team 2021</a>)</span>. Before, conducting regression analysis, data within the scope of interest is selected to create new data frame with aid of R Studio package <span class="citation" data-cites="tidyverse">(<a href="#ref-tidyverse" role="doc-biblioref">Wickham et al. 2019</a>)</span>. Both raw firearm checks data set and state crime data set are first limited to the year of 2019, the year of this research’s interest. Because the firearm check data is categorized by months, the first assumption behind this paper is that the data of December 2019 from the firearm date frame will be used as the proxy for the entire 2019. December is chosen for two reasons: it is the last month of the year when permit holders of earlier months would maintain their qualifications through the year while new permits of the year are approved; December is also the month when people take their Christmas break from school and work that opens up more chances of gun related crimes.</p>
<p>After filtering the data frame by year, six columns of variable are chosen in total and bind to create the final data frame to be analyzed in this research. Five variables are chosen from the firearm checks data， which are month, state, permit, handgun, and long-gun. The key explanatory variable ‘permit’ is defined as ‘the number of people with a gun permit,’ while the two ‘gun’ named variable are defined with respect to their number of presences at each state. Variables ‘handgun’ and ‘long-gun’ are chosen with purpose to nuance the regression analysis after generating the machine-learning models, which will be explained towards the end of this section. Two additional variables are chosen from the state_crime data set and added together to create a new variable: total number of recorded crimes happened at 2019, which includes the total number of recorded violent crimes: assaults, murders, rapes, and robberies and the total number of the property-related crime: burglaries, larcenies, and motor crimes.</p>
<p>After the data frame is set, the analysis starts by plotting the two variables of interest: number of permits in each state and the total number of reported crime in each state into a scatter-plot to check if the two variables present features of linearity that support the usage of liner regression analysis. The scatter plot would be used as the first preliminary result before applying machine learning models with R Studio packages [<span class="citation" data-cites="GGally">Schloerke et al. (<a href="#ref-GGally" role="doc-biblioref">2021</a>)</span>]<span class="citation" data-cites="ggfortify">(<a href="#ref-ggfortify" role="doc-biblioref">Tang, Horikoshi, and Li 2016</a>)</span>[<span class="citation" data-cites="tidymodels">Kuhn and Wickham (<a href="#ref-tidymodels" role="doc-biblioref">2020</a>)</span>]<span class="citation" data-cites="infer">(<a href="#ref-infer" role="doc-biblioref">Couch et al. 2021</a>)</span><span class="citation" data-cites="knitr">(<a href="#ref-knitr" role="doc-biblioref">Xie 2022</a>)</span>. There are three models applied in this research, in which model 1 is the classic linear regression model without any modification:</p>
<p><span class="math inline">\(model 1: \hat{y} = \hat{\beta}_0 + \hat{\beta}_1 x_1\)</span></p>
<p><span class="math inline">\(H_0: \hat{\beta}_1 = 0\)</span></p>
<p><span class="math inline">\(H_a: \hat{\beta}_1 ≠ 0\)</span></p>
<p>model 2 is a logarithmic y-variable-transformed linear regression model:</p>
<p><span class="math inline">\(model 2: \hat{ln(y)} = \hat{\beta}_0 + \hat{\beta}_1 x_1\)</span></p>
<p><span class="math inline">\(H_0: \hat{\beta}_1 = 0\)</span></p>
<p><span class="math inline">\(H_a: \hat{\beta}_1 ≠ 0\)</span></p>
<p>model 3 is another logarithmic model with both x and y-variables-transformed:</p>
<p><span class="math inline">\(model 3: \hat{ln(y)} = \hat{\beta}_0 + \hat{\beta}_1ln(x_1)\)</span></p>
<p><span class="math inline">\(H_0: \hat{\beta}_1 = 0\)</span></p>
<p><span class="math inline">\(H_a: \hat{\beta}_1 ≠ 0\)</span></p>
<p>where <span class="math inline">\(x_1\)</span> is defined as the number of permits registered at a given state.</p>
<p>By applying feature (predictor) engineering to variables under the frame of regression analysis, this research would generate three models with different hypotheses and adjusted-r-squared values. On one hand, for each of the models, null hypothesis is given as non-association between explanatory and response variables, while alternative hypothesis is presence of association between the two variables.</p>
<p>In addition to the three linear regression models, one additional multivariate regression model is created based the best-fitted linear model from the three. Specifically, the model with the highest adjusted-r-squared value would be nuanced by narrowing the magnitude of the explanatory variable from the number of permits to the actual number of guns (handguns + long_guns) presented at each state. While using the permit variable broadens the scope of analysis, the replacement of the explanatory variable would enhance this research’s precision to capture the association between the actual gun possession and prevalence of crimes, which is this research’s ultimate purpose. Model 4 is the multivariate regression model without any modification:</p>
<p><span class="math inline">\(model 4: \hat{y} = \hat{\beta}_0 + \hat{\beta}_1 x_2 + \hat{\beta}_2 x_3\)</span></p>
<p><span class="math inline">\(x_2\)</span> is defined as the number of handgun registered at a given state</p>
<p><span class="math inline">\(x_3\)</span> is defined as the number of long-gun registered at a given state</p>
<p><span class="math inline">\(H_0: \beta_1 = \beta_2 = 0\)</span></p>
<p><span class="math inline">\(H_0: \beta_1 ≠ \beta_2 ≠ 0\)</span></p>
<p>For each of the fitted models, both independence of residuals and normality are analyzed with corresponding plots and summary statistics given. The four prediction sets are compiled together along the raw data set to conclude which of the prediction is the best fit of the true relationship between prevalence of firearms and occurrence of crimes across the United States at 2019.</p>
</section>
<section id="results" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Results</h1>
<p>Before discussing the main results, it would be useful to understand the descriptive statistics of the variables. Based on figure 1, among the six variables of interest, the first two variables are categorical (‘month’ being ordinal and ‘state’ being nominal) and the rest are discrete numerical.</p>
<p>The two variables of interest are permit and total crime, thereby the two are chosen to generate a scatter-plot as shown in figure 2. Based on the the scatter-plot, there is a sign of moderate positive linearity that approves the feasibility of linear regression analysis.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Screen%20Shot%202022-11-09%20at%204.06.14%20PM.png" class="img-fluid figure-img" alt="Before discussing the main results, it would be useful to understand the descriptive statistics of the variables. Based on figure 1, among the six variables of interest, the first two variables are categorical ('month' being ordinal and 'state' being nominal) and the rest are discrete numerical." width="649"></p>
<p></p><figcaption class="figure-caption">Descriptive Statistics</figcaption><p></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Screen%20Shot%202022-11-03%20at%204.36.09%20PM.png" class="img-fluid figure-img" width="526"></p>
<p></p><figcaption class="figure-caption">Scatter-plot (model1)</figcaption><p></p>
</figure>
</div>
<p>According to figure 3, the fitted p-value from model 1 is almost 0, which is smaller than the given alpha at 0.0125. Therefore, the null hypothesis is rejected and there is association between number of permits and crimes.<br>
</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Screen%20Shot%202022-11-09%20at%204.01.37%20PM.png" width="500" height="61" class="figure-img"></p>
<p></p><figcaption class="figure-caption">Summary statistics and formula of model 1 simple linear regression</figcaption><p></p>
</figure>
</div>
<p><span class="math inline">\(model 1: \hat{y} = \hat{\beta}_0 + \hat{\beta}_1 x_1\)</span></p>
<p><span class="math inline">\(H_0: \hat{\beta}_1 = 0\)</span></p>
<p><span class="math inline">\(H_a: \hat{\beta}_1 ≠ 0\)</span></p>
<p>Continuing the analysis, as demonstrated by figure 4, the residuals plot suggests there is a weak and subtle negative correlation between the residuals and fitted values, which barely meets the homoscedasticity requirement. On the other hand, the normal QQ plot suggests that most points align to the QQ line well. There are just a few points at the two ends that do not follow the regression line, which satisfies the normality check of the linear regression analysis.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Screen%20Shot%202022-11-03%20at%204.39.53%20PM.png" class="img-fluid figure-img" width="504"></p>
<p></p><figcaption class="figure-caption">Residual independence and normality plots of simple linear regression model 1</figcaption><p></p>
</figure>
</div>
<p>After applying the logarithmic transformation to both explanatory and response variable of interest, the scatter-plot maintains features of moderate positive linearity as displayed by figure 5.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Screen%20Shot%202022-11-16%20at%2012.51.33%20PM.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Scatter-plot (model 3)</figcaption><p></p>
</figure>
</div>
<p>However, under model 3, both the residuals plot and normal QQ plot have less desirable features in comparison to the plots generated under model 1. According to figure 6, there is a more obvious polynomial correlation between the residuals and fitted values, which does not meet the constant variance requirement. On the other hand, the normal QQ plot also demonstrate more points that fit less accordingly to the QQ line. Therefore, model 3 is generally a less accurate prediction in comparison to model 1 under the frame of linear regression analysis.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Screen%20Shot%202022-11-15%20at%208.00.18%20PM.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Residual independence and normality plots of simple linear regression model 3</figcaption><p></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Screen%20Shot%202022-11-16%20at%203.14.06%20PM.png" class="img-fluid figure-img" width="500"></p>
<p></p><figcaption class="figure-caption">Summary statistics from simple linear regression model 1</figcaption><p></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Screen%20Shot%202022-11-16%20at%203.14.13%20PM.png" class="img-fluid figure-img" width="500"></p>
<p></p><figcaption class="figure-caption">Summary statistics from simple linear regression model 2</figcaption><p></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Screen%20Shot%202022-11-16%20at%203.14.20%20PM.png" class="img-fluid figure-img" width="500"></p>
<p></p><figcaption class="figure-caption">Summary statistics from simple linear regression model 3</figcaption><p></p>
</figure>
</div>
<p>Among the three linear regression models, according to figure 7, 8, 9, model 1 has shown the highest adjusted-r_squared value (0.474). So that, model 1 is chosen as the base template to implement multivariate linear regression analysis. As described in the method section, model 4 is a multivariate linear regression that nuances the explanatory variable from number of permits to number of firearms, which is the sum of handgun and long-gun. Because model 4 is featured based on model 1, similar approach of analysis is conducted. The updated variables of interest are total number of guns and total crime, thereby the two are chosen to plot a scatter-plot as shown in figure 10. This scatter-plot indicates stronger positive linearity in comparison to that of model 1, which also approves the feasibility of linear regression analysis.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Screen%20Shot%202022-11-15%20at%205.08.55%20PM.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Scatter-plot (model 4)</figcaption><p></p>
</figure>
</div>
<p>Given the p-values of the fitted coefficients of the full model, and specifying the significance level at <span class="math inline">\(\alpha = 0.0125\)</span>, when the two <span class="math inline">\(\hat{\beta}_1\)</span> are viewed separately, null hypotheses <span class="math inline">\(H_0: \beta_1 = 0\)</span> can not be rejected because, as illustrated by figure 11, the given p-value for <span class="math inline">\(x_2\)</span> is 0.4645, which is much larger than the set alpha.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Screen%20Shot%202022-11-09%20at%204.04.53%20PM.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Summary statistics of model 4 multi-linear regression (separated variables)</figcaption><p></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Screen%20Shot%202022-11-16%20at%201.36.40%20PM.png" class="img-fluid figure-img" width="570"></p>
<p></p><figcaption class="figure-caption">Summary statistics and formula of model 4 multi-linear regression (combined variables)</figcaption><p></p>
</figure>
</div>
<p><span class="math inline">\(model 4: \hat{y} = \hat{\beta}_0 + \hat{\beta}_1 x_2 + \hat{\beta}_2 x_3\)</span></p>
<p><span class="math inline">\(x_2\)</span> is defined as the number of handgun registered at a given state</p>
<p><span class="math inline">\(x_3\)</span> is defined as the number of long-gun registered at a given state</p>
<p>where <span class="math inline">\(x_2\)</span> and <span class="math inline">\(x_3\)</span> are assumed to be positively correlated</p>
<p>On the other hand, when we treat the two <span class="math inline">\(\hat{\beta}_1\)</span> as one, the summary statistics from figure 12 suggests that we can reject the null hypothesis because the calculated p-value is almost 0, which is less than the set alpha. Superficially, the results appear contradictory, but they are actually not because the calculated p-value takes both <span class="math inline">\(x_2\)</span> and <span class="math inline">\(x_3\)</span> into consideration when fitting. The value change of either <span class="math inline">\(x_2\)</span> or <span class="math inline">\(x_3\)</span> would affect the other and have a collective effect on the result. On the other hand, separation of the two <span class="math inline">\(\hat{\beta}\)</span> only take consideration of one x-variable respectfully, which generates a less accurate prediction of the linear relationship as <span class="math inline">\(x_2\)</span> and <span class="math inline">\(x_3\)</span> are correlated, which means a change of either <span class="math inline">\(x_2\)</span> or <span class="math inline">\(x_3\)</span> would also affect the value of the other that have a collective effect on the result.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Screen%20Shot%202022-11-09%20at%203.59.00%20PM.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Residual independence and normality plots of simple linear regression model 4</figcaption><p></p>
</figure>
</div>
<p>With respect to the residuals and normality checks, as demonstrated by figure 13, the residuals plot demonstrates the weakest correlation between the residuals and fitted values among the four models. In addition, the normal QQ plot also depicts that majority of points lie on the QQ line. Deviation from the QQ line is greatly reduced at both ends. Both plots best satisfy the conditions of the linear regression analysis, which also suggests that this model would potentially best fit the reality.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Screen%20Shot%202022-11-09%20at%204.00.13%20PM.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Summarized results based on 4 predictions of regression models</figcaption><p></p>
</figure>
</div>
<p>Summarizing all the results we have generated, figure 14 displays pairwise scatter-plots of the true number of crimes at each state versus all four predictions for the training set. Based on the pairwise plot, prediction 4 has the most accurate prediction because it has the highest correlation coefficient with the actual number of crimes. In addition, the qualitative representation of relationship between prediction 4 and number of crimes is closest to that of the actual graphic representation between the two ‘crimes’ variable. Lastly, because the scatter plot between volume and prediction 4 data best approximates a positive linear correlation, which also suggest prediction 4 to be the most accurate.</p>
</section>
<section id="discussionconclusions" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Discussion/Conclusions</h1>
<p>In this project, we aim to assess the association between gun possession and the crime rates across U.S. in 2019. Based on the four models we created, we can conclude that there is a positive correlation between number of guns possessed and the total crime rate. Among all the models, model 4, which predicts the association between crime rate and the number of handguns and long guns combined, shows the strongest correlation with adjusted <span class="math inline">\(r = 0.78\)</span> and <span class="math inline">\(r^2 = 0.60\)</span>. Meanwhile, model 1 which predicts the association between crime rate and the number of people who own a permit also shows a relatively strong results with adjusted <span class="math inline">\(r = 0.70\)</span> and <span class="math inline">\(r^2 = 0.47\)</span>. Intuitively, people who have a permit doesn’t necessarily imply that they already have possessed a gun. Hence, there might exist an over-prediction and it makes sense that model 4 will be a better predictor than model 1.</p>
<p>The gun ownership has always been a highly controversial topic, especially when it comes to the enactment of laws or constitutions. If the congress decided to make a new gun regulation law, and they look at the results of our project, the republicans, on the one hand, might say that <span class="math inline">\(r^2\)</span> of 0.60 is not large enough to be persuasive for passing a new law on gun-control. On the other hand, the democrats will claim that this is more than enough to be taken into consideration. Nevertheless, if discussions are only within the field of social science, <span class="math inline">\(r^2\)</span> of 0.60 is a considerably strong indicator.</p>
<p>Unfortunately, several limitations of our study may result in the inaccuracy of the outputs. Firstly, our measure does not provide information on any firearms which can be obtained in secondary market transfers or any illegal transactions. Moreover, the model used for fitting a linear regression might not be the most appropriate estimation. Instead, we can try to apply functions other than the natural logarithm transformation. It is clear that more studies and predictions are in need in the future to better approximate the association between firearms and criminal activities in reality.</p>
</section>
<section id="appendix" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Appendix</h1>
<div class="cell" data-hash="MATH-254-Project-Final-submission-_cache/html/raw data frame_fa776705cfe609f801b4c9b42494ab64">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(infer)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggfortify)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidymodels)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(GGally)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co">#raw firearm data</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>remote <span class="ot">=</span> <span class="st">'https://raw.githubusercontent.com/'</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>account <span class="ot">=</span> <span class="st">'BuzzFeedNews/nics-firearm-background-checks/'</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>folder <span class="ot">=</span> <span class="st">'master/data/'</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>file  <span class="ot">=</span> <span class="st">'nics-firearm-background-checks.csv'</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>url <span class="ot">=</span> <span class="fu">paste</span>(remote, account, folder, file, <span class="at">sep =</span> <span class="st">''</span>)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>firearm <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(url)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="co">#raw crime data</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>remote <span class="ot">=</span> <span class="st">'https://raw.githubusercontent.com/'</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>account <span class="ot">=</span> <span class="st">'AndrewGou1013/'</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>file <span class="ot">=</span> <span class="st">'State-crime-final/main/state_crime_final.csv'</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>url <span class="ot">=</span> <span class="fu">paste</span>(remote, account, file, <span class="at">sep =</span> <span class="st">''</span>)</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>state_crime <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(url)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="MATH-254-Project-Final-submission-_cache/html/year and variables selection from firearm data_13c62a6925116abaa9c0d8f71cd55db4">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>df_Dec <span class="ot">&lt;-</span> </span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  firearm <span class="sc">%&gt;%</span> </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(month <span class="sc">==</span> <span class="st">'2019-12'</span>)  </span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co">#deleted Guam, Virgin Islands, Marine Islands, Puerto Rico</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>new_df_Dec <span class="ot">&lt;-</span> df_Dec[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">12</span>, <span class="dv">22</span>, <span class="dv">42</span>, <span class="dv">50</span>), ] </span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>new_df_Dec_month <span class="ot">&lt;-</span> </span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>new_df_Dec <span class="sc">%&gt;%</span> </span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(month)</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="fu">as.factor</span>(<span class="st">'month'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] month
Levels: month</code></pre>
</div>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>new_df_Dec_state <span class="ot">&lt;-</span> </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>new_df_Dec <span class="sc">%&gt;%</span> </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(state)  </span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="fu">as.factor</span>(<span class="st">'state'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] state
Levels: state</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>new_df_Dec_permit <span class="ot">&lt;-</span> </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>new_df_Dec <span class="sc">%&gt;%</span> </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(permit) </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>new_df_Dec_handgun <span class="ot">&lt;-</span> </span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>new_df_Dec <span class="sc">%&gt;%</span> </span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(handgun) </span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>new_df_Dec_long_gun <span class="ot">&lt;-</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>new_df_Dec <span class="sc">%&gt;%</span> </span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(long_gun)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="MATH-254-Project-Final-submission-_cache/html/year and variable selection of violence data_13c5f6a20f749e7cf91cdb9104a47467">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>state_crime_2019_final <span class="ot">&lt;-</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  state_crime <span class="sc">%&gt;%</span> </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Year <span class="sc">==</span> <span class="dv">2019</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">state_crime_2019_total =</span> Data.Totals.Property.All <span class="sc">+</span> Data.Totals.Violent.All) <span class="sc">%&gt;%</span> </span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(state_crime_2019_total)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="MATH-254-Project-Final-submission-_cache/html/binding selected variables as the final data frame_c6fbd7334dfa4e503e7d550db95c15bd">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>df_firearm_final <span class="ot">&lt;-</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  new_df_Dec_month <span class="sc">%&gt;%</span> </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(new_df_Dec_state) <span class="sc">%&gt;%</span> </span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(new_df_Dec_permit) <span class="sc">%&gt;%</span> </span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(new_df_Dec_handgun) <span class="sc">%&gt;%</span> </span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(new_df_Dec_long_gun) <span class="sc">%&gt;%</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(state_crime_2019_final)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="MATH-254-Project-Final-submission-_cache/html/scatter plot - model 1_73e82c26a1b420dbd0a27a23eaebc38c">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>Scatterplot_between_permit_and_total_Violence <span class="ot">&lt;-</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  df_firearm_final <span class="sc">%&gt;%</span> </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> permit<span class="sc">+</span><span class="dv">1</span>, </span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> state_crime_2019_total)) <span class="sc">+</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">'lm'</span>, <span class="at">lwd =</span> <span class="dv">1</span>, <span class="at">se =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a> <span class="fu">xlab</span>(<span class="st">'Permit'</span>) <span class="sc">+</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a> <span class="fu">ylab</span>(<span class="st">'Total Crime'</span>) <span class="sc">+</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a> <span class="fu">ggtitle</span>(<span class="st">'Scatterplot between permit and total crime'</span>)</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>Scatterplot_between_permit_and_total_Violence</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="MATH-254-Project-Final-submission-_files/figure-html/scatter%20plot%20-%20model%201-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell" data-hash="MATH-254-Project-Final-submission-_cache/html/linear regression model 1_17f9a9ffff4056b54207d1aace4e58dc">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>model_1 <span class="ot">&lt;-</span> </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">linear_reg</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">'lm'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">'regression'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit</span>(state_crime_2019_total <span class="sc">~</span> permit<span class="sc">+</span><span class="dv">1</span>, </span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">data =</span> df_firearm_final) </span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="co"># tidy output</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(model_1) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 5
  term        estimate std.error statistic      p.value
  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;        &lt;dbl&gt;
1 (Intercept)  50748.   25544.        1.99 0.0526      
2 permit          16.2      2.39      6.79 0.0000000142</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># glance at metrics</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glance</span>(model_1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 12
  r.squared adj.r.squa…¹  sigma stati…² p.value    df logLik   AIC   BIC devia…³
      &lt;dbl&gt;        &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
1     0.485        0.474 1.41e5    46.1 1.42e-8     1  -676. 1358. 1364. 9.80e11
# … with 2 more variables: df.residual &lt;int&gt;, nobs &lt;int&gt;, and abbreviated
#   variable names ¹​adj.r.squared, ²​statistic, ³​deviance</code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># residual analysis and accuracy of the model</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(model_1, <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="MATH-254-Project-Final-submission-_files/figure-html/linear%20regression%20model%201-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell" data-hash="MATH-254-Project-Final-submission-_cache/html/scatter plot - model 2_b86d8c50ac363e6d5da1d5863b41a2fd">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>test_mod <span class="ot">&lt;-</span> </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  df_firearm_final <span class="sc">%&gt;%</span> </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">log_crime =</span> <span class="fu">log</span>(state_crime_2019_total),</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">new_permit =</span> permit<span class="sc">+</span><span class="dv">1</span> )</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>test_mod <span class="sc">%&gt;%</span> </span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> new_permit, <span class="at">y =</span> log_crime)) <span class="sc">+</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">'lm'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="MATH-254-Project-Final-submission-_files/figure-html/scatter%20plot%20-%20model%202-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell" data-hash="MATH-254-Project-Final-submission-_cache/html/linear regression model 2_68f3531d3576955d202a0cc9f9139862">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>model_2 <span class="ot">&lt;-</span> </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">linear_reg</span>() <span class="sc">%&gt;%</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">'lm'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">'regression'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit</span>(log_crime <span class="sc">~</span> new_permit, </span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">data =</span> test_mod) </span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="co"># tidy output</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(model_2) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 5
  term          estimate std.error statistic  p.value
  &lt;chr&gt;            &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
1 (Intercept) 10.9       0.150         72.3  1.90e-51
2 new_permit   0.0000860 0.0000141      6.10 1.63e- 7</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># glance at metrics</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glance</span>(model_2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 12
  r.squ…¹ adj.r…² sigma stati…³ p.value    df logLik   AIC   BIC devia…⁴ df.re…⁵
    &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;   &lt;int&gt;
1   0.432   0.420 0.833    37.2 1.63e-7     1  -62.0  130.  136.    34.0      49
# … with 1 more variable: nobs &lt;int&gt;, and abbreviated variable names
#   ¹​r.squared, ²​adj.r.squared, ³​statistic, ⁴​deviance, ⁵​df.residual</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># residual analysis and accuracy of the model</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(model_2, <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="MATH-254-Project-Final-submission-_files/figure-html/linear%20regression%20model%202-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell" data-hash="MATH-254-Project-Final-submission-_cache/html/scatter plot - model 3_48e1c462cf3b4bf705ffe4bb953baae5">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>test_mod_again <span class="ot">&lt;-</span> </span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  test_mod <span class="sc">%&gt;%</span> </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">log_permit =</span> <span class="fu">log</span>(new_permit))</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>test_mod_again <span class="sc">%&gt;%</span> </span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> log_permit, <span class="at">y =</span> log_crime)) <span class="sc">+</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">'lm'</span>) <span class="sc">+</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">'Log_Permit'</span>) <span class="sc">+</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">'Log_Total Crime'</span>) <span class="sc">+</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">'Scatterplot between number of permit and total crime under log transformation'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="MATH-254-Project-Final-submission-_files/figure-html/scatter%20plot%20-%20model%203-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell" data-hash="MATH-254-Project-Final-submission-_cache/html/linear regression model 3_b1f65b103bf5853b6e98fb685774fe1e">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># fit new model</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>model_3 <span class="ot">&lt;-</span> </span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">linear_reg</span>() <span class="sc">%&gt;%</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">'lm'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">'regression'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit</span>(log_crime <span class="sc">~</span> log_permit, </span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">data =</span> test_mod_again)</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a><span class="co"># tidy output</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(model_3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 5
  term        estimate std.error statistic  p.value
  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
1 (Intercept)    9.29     0.414      22.4  2.07e-27
2 log_permit     0.284    0.0521      5.44 1.67e- 6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># glance at metrics</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glance</span>(model_3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 12
  r.squ…¹ adj.r…² sigma stati…³ p.value    df logLik   AIC   BIC devia…⁴ df.re…⁵
    &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;   &lt;int&gt;
1   0.377   0.364 0.872    29.6 1.67e-6     1  -64.4  135.  141.    37.3      49
# … with 1 more variable: nobs &lt;int&gt;, and abbreviated variable names
#   ¹​r.squared, ²​adj.r.squared, ³​statistic, ⁴​deviance, ⁵​df.residual</code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># residual analysis</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(model_3, <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="MATH-254-Project-Final-submission-_files/figure-html/linear%20regression%20model%203-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell" data-hash="MATH-254-Project-Final-submission-_cache/html/summary statistics binded_ac61428bf1d787c07b13567403aebedb">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glance</span>(model_1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 12
  r.squared adj.r.squa…¹  sigma stati…² p.value    df logLik   AIC   BIC devia…³
      &lt;dbl&gt;        &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
1     0.485        0.474 1.41e5    46.1 1.42e-8     1  -676. 1358. 1364. 9.80e11
# … with 2 more variables: df.residual &lt;int&gt;, nobs &lt;int&gt;, and abbreviated
#   variable names ¹​adj.r.squared, ²​statistic, ³​deviance</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glance</span>(model_2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 12
  r.squ…¹ adj.r…² sigma stati…³ p.value    df logLik   AIC   BIC devia…⁴ df.re…⁵
    &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;   &lt;int&gt;
1   0.432   0.420 0.833    37.2 1.63e-7     1  -62.0  130.  136.    34.0      49
# … with 1 more variable: nobs &lt;int&gt;, and abbreviated variable names
#   ¹​r.squared, ²​adj.r.squared, ³​statistic, ⁴​deviance, ⁵​df.residual</code></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glance</span>(model_3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 12
  r.squ…¹ adj.r…² sigma stati…³ p.value    df logLik   AIC   BIC devia…⁴ df.re…⁵
    &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;   &lt;int&gt;
1   0.377   0.364 0.872    29.6 1.67e-6     1  -64.4  135.  141.    37.3      49
# … with 1 more variable: nobs &lt;int&gt;, and abbreviated variable names
#   ¹​r.squared, ²​adj.r.squared, ³​statistic, ⁴​deviance, ⁵​df.residual</code></pre>
</div>
</div>
<div class="cell" data-hash="MATH-254-Project-Final-submission-_cache/html/scatter plot - model 4_400f7b90d4d6dabbcba32ea5d6421572">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>Scatterplot_between_handgun_and_total_Violence <span class="ot">&lt;-</span> </span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  df_firearm_final <span class="sc">%&gt;%</span> </span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> handgun <span class="sc">+</span> long_gun, </span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> state_crime_2019_total)) <span class="sc">+</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">'lm'</span>, <span class="at">lwd =</span> <span class="dv">1</span>, <span class="at">se =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a> <span class="fu">xlab</span>(<span class="st">'Total gun'</span>) <span class="sc">+</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a> <span class="fu">ylab</span>(<span class="st">'Total Crime'</span>) <span class="sc">+</span></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a> <span class="fu">ggtitle</span>(<span class="st">'Scatterplot between number of firearms and total crime'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="MATH-254-Project-Final-submission-_cache/html/linear regression model 4_3ba6704574c4b6388d61fd88afa01de5">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>model_4 <span class="ot">&lt;-</span> </span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">linear_reg</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">'lm'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">'regression'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit</span>(state_crime_2019_total <span class="sc">~</span> handgun <span class="sc">+</span> long_gun, </span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">data =</span> df_firearm_final) <span class="co"># fits the model</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a><span class="co"># tidy output</span></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(model_4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 5
  term         estimate std.error statistic p.value
  &lt;chr&gt;           &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;
1 (Intercept) -15149.    27315.      -0.555 0.582  
2 handgun          1.76      2.39     0.737 0.465  
3 long_gun        12.1       3.74     3.24  0.00216</code></pre>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># glance at metrics</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glance</span>(model_4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 12
  r.squared adj.r.squ…¹  sigma stati…²  p.value    df logLik   AIC   BIC devia…³
      &lt;dbl&gt;       &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
1     0.612       0.596 1.24e5    37.9 1.35e-10     2  -669. 1346. 1354. 7.38e11
# … with 2 more variables: df.residual &lt;int&gt;, nobs &lt;int&gt;, and abbreviated
#   variable names ¹​adj.r.squared, ²​statistic, ³​deviance</code></pre>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># residual analysis</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(model_4, <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="MATH-254-Project-Final-submission-_files/figure-html/linear%20regression%20model%204-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell" data-hash="MATH-254-Project-Final-submission-_cache/html/predictions_bebd4f9803630ccfe77039393900419a">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>test_preds <span class="ot">&lt;-</span> </span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  test_mod_again <span class="sc">%&gt;%</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>month, <span class="sc">-</span>handgun, <span class="sc">-</span>long_gun, <span class="sc">-</span>log_crime, <span class="sc">-</span>new_permit, <span class="sc">-</span>log_permit, <span class="sc">-</span>permit) <span class="sc">%&gt;%</span> </span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(<span class="at">pred1 =</span> <span class="fu">predict</span>(model_1, <span class="at">new_data =</span> test_mod_again), </span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">pred2 =</span> <span class="fu">exp</span>(<span class="fu">predict</span>(model_2, <span class="at">new_data =</span> test_mod_again)),</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">pred3 =</span> <span class="fu">exp</span>(<span class="fu">predict</span>(model_3, <span class="at">new_data =</span> test_mod_again)),</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">pred4 =</span> <span class="fu">predict</span>(model_4, <span class="at">new_data =</span> test_mod_again))</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a><span class="co"># change column names</span></span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(test_preds) <span class="ot">=</span> <span class="fu">c</span>(<span class="st">'state'</span>, <span class="st">'crimes'</span>, <span class="st">'pred1'</span>, <span class="st">'pred2'</span>, <span class="st">'pred3'</span>, <span class="st">'pred4'</span>)</span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a><span class="co"># display the data</span></span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(test_preds)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 51
Columns: 6
$ state  &lt;chr&gt; "Alabama", "Alaska", "Arizona", "Arkansas", "California", "Colo…
$ crimes &lt;int&gt; 156179, 27637, 210779, 103893, 1095445, 171127, 57408, 26046, 3…
$ pred1  &lt;dbl&gt; 598086.07, 57020.84, 124456.97, 88756.45, 530828.69, 129835.61,…
$ pred2  &lt;dbl&gt; 948479.16, 54149.69, 77369.93, 64051.33, 664450.13, 79603.64, 7…
$ pred3  &lt;dbl&gt; 208684.01, 58757.65, 118148.12, 97910.44, 201062.75, 120532.70,…
$ pred4  &lt;dbl&gt; 356533.68, 28246.33, 143124.50, 132855.70, 429281.06, 226601.07…</code></pre>
</div>
</div>
<div class="cell" data-hash="MATH-254-Project-Final-submission-_cache/html/final pair plots_89c37aa24a20c269018c27af34c894e3">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>test_preds <span class="sc">%&gt;%</span> </span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  GGally<span class="sc">::</span><span class="fu">ggscatmat</span>() <span class="sc">+</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span><span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="MATH-254-Project-Final-submission-_files/figure-html/final%20pair%20plots-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="bibliography" class="level1 unnumbered" data-number="6">


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">6 Bibliography</h2><div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography">
<div id="ref-branas2009" class="csl-entry" role="doc-biblioentry">
Branas, Charles C., Therese S. Richmond, Dennis P. Culhane, Thomas R. Ten Have, and Douglas J. Wiebe. 2009. <span>“Investigating the Link Between Gun Possession and Gun Assault.”</span> <em>American Journal of Public Health</em> 99 (11): 2034–40. <a href="https://doi.org/10.2105/ajph.2008.143099">https://doi.org/10.2105/ajph.2008.143099</a>.
</div>
<div id="ref-state_crime2019" class="csl-entry" role="doc-biblioentry">
C.Bart, Austin, Dennis Kafura, Clifford A. Shaffer, Javier Tibau, Luke Gusukuma, and Eli. Tilevich. 2022. <span>“State Crime CSV File from the CORGIS Dataset Project.”</span> <a href="https://corgis-edu.github.io/corgis/csv/state_crime/">https://corgis-edu.github.io/corgis/csv/state_crime/</a>.
</div>
<div id="ref-Cook1981" class="csl-entry" role="doc-biblioentry">
Cook, Philip J. 1981. <span>“The Effect of Gun Availability on Violent Crime Patterns.”</span> <a href="https://www.jstor.org/stable/1044071">https://www.jstor.org/stable/1044071</a>.
</div>
<div id="ref-infer" class="csl-entry" role="doc-biblioentry">
Couch, Simon P., Andrew P. Bray, Chester Ismay, Evgeni Chasnovski, Benjamin S. Baumer, and Mine Çetinkaya-Rundel. 2021. <span>“<span></span>Infer<span></span>: An <span></span>r<span></span> Package for Tidyverse-Friendly Statistical Inference”</span> 6: 3661. <a href="https://doi.org/10.21105/joss.03661">https://doi.org/10.21105/joss.03661</a>.
</div>
<div id="ref-gunlaw2022" class="csl-entry" role="doc-biblioentry">
Han, Daniel. 2022. <span>“New Jersey Poised to Enact <span>‘Nation’s Strongest’</span> Gun Law After Supreme Court Ruling,”</span> October. <a href="https://www.politico.com/news/2022/10/13/lawmakers-pitch-nations-strongest-gun-bill-in-response-to-supreme-court-00061693">https://www.politico.com/news/2022/10/13/lawmakers-pitch-nations-strongest-gun-bill-in-response-to-supreme-court-00061693</a>.
</div>
<div id="ref-Kleck1993" class="csl-entry" role="doc-biblioentry">
Kleck, Gary, and E. Britt Patterson. 1993. <span>“The Impact of Gun Control and Gun Ownership Levels on Violence Rates.”</span> <a href="https://www.jstor.org/stable/23365752">https://www.jstor.org/stable/23365752</a>.
</div>
<div id="ref-tidymodels" class="csl-entry" role="doc-biblioentry">
Kuhn, Max, and Hadley Wickham. 2020. <span>“Tidymodels: A Collection of Packages for Modeling and Machine Learning Using Tidyverse Principles.”</span> <a href="https://www.tidymodels.org">https://www.tidymodels.org</a>.
</div>
<div id="ref-miller2007" class="csl-entry" role="doc-biblioentry">
Miller, Matthew, David Hemenway, and Deborah Azrael. 2007. <span>“State-Level Homicide Victimization Rates in the US in Relation to Survey Measures of Household Firearm Ownership, 2001<span></span>2003.”</span> <em>Social Science &amp; Medicine</em> 64 (3): 656–64. <a href="https://doi.org/10.1016/j.socscimed.2006.09.024">https://doi.org/10.1016/j.socscimed.2006.09.024</a>.
</div>
<div id="ref-Rstudio" class="csl-entry" role="doc-biblioentry">
R Core Team. 2021. <em>R: A Language and Environment for Statistical Computing</em>. Vienna, Austria: R Foundation for Statistical Computing. <a href="https://www.R-project.org/">https://www.R-project.org/</a>.
</div>
<div id="ref-shooter2018" class="csl-entry" role="doc-biblioentry">
Rozsa, Lori, Mark Berman, and Renae Merle. 2018. <span>“Accused South Florida School Shooter Confessed to Rampage That Killed 17 People, Police Say,”</span> February. <a href="https://www.washingtonpost.com/news/post-nation/wp/2018/02/15/florida-school-shooting-suspect-booked-on-17-counts-of-murder-premeditated/">https://www.washingtonpost.com/news/post-nation/wp/2018/02/15/florida-school-shooting-suspect-booked-on-17-counts-of-murder-premeditated/</a>.
</div>
<div id="ref-GGally" class="csl-entry" role="doc-biblioentry">
Schloerke, Barret, Di Cook, Joseph Larmarange, Francois Briatte, Moritz Marbach, Edwin Thoen, Amos Elberg, and Jason Crowley. 2021. <span>“GGally: Extension to ’Ggplot2’.”</span> <a href="https://CRAN.R-project.org/package=GGally">https://CRAN.R-project.org/package=GGally</a>.
</div>
<div id="ref-seconda2002" class="csl-entry" role="doc-biblioentry">
<span>“Second Amendment.”</span> 2002. <a href="https://doi.org/10.4135/9781483302799.n327">https://doi.org/10.4135/9781483302799.n327</a>.
</div>
<div id="ref-firearm_check2019" class="csl-entry" role="doc-biblioentry">
Singer-Vine, Jeremy. 2019. <span>“FBI NICS Firearm Background Check Data in 2019.”</span> <a href="https://github.com/BuzzFeedNews/nics-firearm-background-checks">https://github.com/BuzzFeedNews/nics-firearm-background-checks</a>.
</div>
<div id="ref-shooting2022" class="csl-entry" role="doc-biblioentry">
Smith, Sarah. 2022. <span>“Texas Shooting: America’s Gun Control Debate That Never Goes Away.”</span> <a href="https://www.bbc.com/news/world-us-canada-61585716">https://www.bbc.com/news/world-us-canada-61585716</a>.
</div>
<div id="ref-ggfortify" class="csl-entry" role="doc-biblioentry">
Tang, Yuan, Masaaki Horikoshi, and Wenxuan Li. 2016. <span>“Ggfortify: Unified Interface to Visualize Statistical Result of Popular r Packages”</span> 8. <a href="https://doi.org/10.32614/RJ-2016-060">https://doi.org/10.32614/RJ-2016-060</a>.
</div>
<div id="ref-tidyverse" class="csl-entry" role="doc-biblioentry">
Wickham, Hadley, Mara Averick, Jennifer Bryan, Winston Chang, Lucy D’Agostino McGowan, Romain François, Garrett Grolemund, et al. 2019. <span>“Welcome to the <span></span>Tidyverse<span></span>”</span> 4: 1686. <a href="https://doi.org/10.21105/joss.01686">https://doi.org/10.21105/joss.01686</a>.
</div>
<div id="ref-knitr" class="csl-entry" role="doc-biblioentry">
Xie, Yihui. 2022. <span>“Knitr: A General-Purpose Package for Dynamic Report Generation in r.”</span> <a href="https://yihui.org/knitr/">https://yihui.org/knitr/</a>.
</div>
</div></section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } 
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>