---
title: "County"
author: "Tural Sadigov" 
date: "`r Sys.Date()`"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

### Load R data named county.

```{r}
load("county.rda")
```

### View only first few rows

```{r}
library(tidyverse)
county <- as.tibble(county)
head(county)
```

### Glimpse into the data.

```{r}
glimpse(county)
```

### Distributions of some categorical variables.

```{r}
# summary in categorical variable
county %>% 
  count(smoking_ban)
county %>% 
  count(smoking_ban) %>% 
  ggplot(aes(smoking_ban, n)) +
  geom_col()
```

```{r}
# summary in categorical variable
county %>% 
  count(smoking_ban, metro)
county %>% 
  count(metro)
county %>% 
  count(metro) %>% 
  ggplot(aes(metro, n)) +
  geom_col()
```

### Examine the first ten cases for three specific variables.

```{r}
# pull out variables/columns, but only first 10 elements
county %>% 
  select(pop2000, poverty, smoking_ban) %>% 
  slice(1:10)
```

### Dot-plot for the poverty data using ggplot. 

```{r}
county %>% 
  ggplot(aes(poverty)) +
  geom_dotplot(dotsize = 1, 
               binwidth = 1/5, 
               stackratio = 1.8, color = 'blue')
```

Histogram of the poverty variable using ggplot.

```{r}
county %>% 
  ggplot(aes(poverty, fill = 'green')) +
  geom_histogram(color = 'white')
```

Histogram of the poverty variable versus various levels of categorical variables.

```{r}
county %>% 
  ggplot(aes(poverty, fill = 'green')) +
  geom_histogram(color = 'white') +
  facet_wrap(~metro)
county %>% 
  ggplot(aes(poverty, fill = 'green')) +
  geom_histogram(color = 'white') +
  facet_wrap(~smoking_ban)
```

Scatterplot and smoothed splines for two numerical variables.

```{r}
county %>% 
  ggplot(aes(unemployment_rate, poverty)) +
  geom_point() +
  geom_smooth() +
  xlab('Unemployment rate') +
  ylab('Poverty') 
```

Below are some summary statistics using base/native R.

```{r}
# mean and median
mean(county$unemployment_rate, na.rm = T)
mean(county$poverty, na.rm = T)
median(county$unemployment_rate, na.rm = T)
median(county$poverty, na.rm = T)
```

```{r}
attach(county)
# numerical summaries
summary(poverty, na.rm = T)

# spread - IQR, sd, var
var(poverty)
var(poverty, na.rm = T)

sd(poverty)
sd(poverty, na.rm = T)

IQR(poverty, na.rm = T)
```

Scatterplot using base R.

```{r}
# scatterpot - understanding two variables
plot(unemployment_rate, poverty, 
     main = 'Poverty rate vs Unemployment rate in each county',
     xlab = 'Unemployment Rate',
     ylab = 'Poverty Rate', col = 'red')
grid(lwd = 3, col = 'blue')

```
